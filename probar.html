export function loadPresentar() {
    const contentDiv = document.getElementById('main-content');
    contentDiv.innerHTML = ''; // Limpiar el contenido anterior
    contentDiv.className = 'mini-container';
    contentDiv.classList.add('presentar-content');

    if (presentar.length === 0) {
        contentDiv.innerHTML = '<p>No hay cantos en la lista de presentación.</p>';
        return;
    }

    const titles = presentar.map(canto => `
        <li data-id="${canto.id}">
            ${canto.id} - ${canto.titulo}
            <span class="play-icon" data-id="${canto.id}">▶</span>
        </li>
    `).join('');
    contentDiv.innerHTML = `<ul>${titles}</ul><button id="presentar-button">Presentar</button>`;

    // Agregar evento de clic a los títulos de presentación
    document.querySelectorAll('#main-content li').forEach(item => {
        item.addEventListener('click', (e) => {
            if (e.target.classList.contains('play-icon')) {
                return; // Evitar que el clic en el icono de presentación cargue el canto
            }
            const canto = presentar.find(c => c.id === item.getAttribute('data-id'));
            const paragraphs = canto.contenido.split('\n\n').map(paragraph => `<p>${paragraph}</p>`).join('');
            contentDiv.innerHTML = `
                <h2>${canto.titulo}</h2>
                ${paragraphs}
                <button id="back-button">◀ REGRESAR</button>
            `;

            // Agregar evento de clic al botón de regreso
            document.getElementById('back-button').addEventListener('click', loadPresentar);
        });
    });

    // Agregar funcionalidad de presentación a la lista de presentación
    document.querySelectorAll('.play-icon').forEach(icon => {
        icon.addEventListener('click', (e) => {
            const cantoId = e.target.getAttribute('data-id');
            presentar = presentar.filter(p => p.id !== cantoId);
            savePresentar();
            loadPresentar();
            e.stopPropagation(); // Evitar que el clic en el icono cargue el canto
        });
    });

    // Agregar evento de clic al botón de presentación
    document.getElementById('presentar-button').addEventListener('click', startPresentation);
}

function savePresentar() {
    localStorage.setItem('presentar', JSON.stringify(presentar));
}
